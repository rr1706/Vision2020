cmake_minimum_required(VERSION 2.8)
project( vision2020 )

option(HEADLESS "Run the program without the GUI" OFF)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

find_package( OpenCV REQUIRED )
find_package( Threads REQUIRED )
find_package( wpilib REQUIRED )

if(CUDA_VERSION)
    add_definitions(-DWITH_CUDA)
endif(CUDA_VERSION)

if(HEADLESS)
	add_definitions(-DHEADLESS)
endif(HEADLESS)

file(GLOB srcs ./*.cpp ./*.h*)

add_executable( vision2020 ${srcs} )
target_link_libraries( vision2020 ${OpenCV_LIBS} ${CMAKE_THREAD_LIBS_INIT} ntcore )

install(TARGETS vision2020 RUNTIME DESTINATION bin)
install(FILES vision.service DESTINATION /lib/systemd/system)



